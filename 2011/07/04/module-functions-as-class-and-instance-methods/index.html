
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Module functions as class and instance methods - Scribblings</title>
  <meta name="author" content="Sunil Kumar">

  
  <meta name="description" content="Consider you have a module and a class. module Mymod and a class Myclass. The situation in hand is such that certain functions in the module need to &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://sunilkumarn.github.io/technical/2011/07/04/module-functions-as-class-and-instance-methods">
  <link href="/technical/favicon.png" rel="icon">
  <link href="/technical/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/github/atom.xml" rel="alternate" title="Scribblings" type="application/atom+xml">
  <script src="/technical/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/technical/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/technical/">Scribblings</a></h1>
  
    <h2>Scribbling down experiences :)</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/github/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:sunilkumarn.github.io/technical" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/technical/">Blog</a></li>
  <li><a href="/technical/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Module Functions as Class and Instance Methods</h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-07-04T10:50:51+05:30" pubdate data-updated="true">Jul 4<span>th</span>, 2011</time>
        
         | <a href="#disqus_thread">Comments</a>
        
      </p>
    
  </header>


<div class="entry-content"><p>Consider you have a module and a class.</p>

<p>module Mymod and a class Myclass.</p>

<p>The situation in hand is such that certain functions in the module need to end up being instance methods of the class Myclass and certain functions need to be Class methods.  You could very well imagine of such situations. Consider you are using ActiveRecord and have a sub class <strong>Subscription</strong> in correspondence with a DB table. You want to insert logic, within the module, that would work in each of the following case.</p>

<p>1) When a subscription fails or succeeds.</p>

<p>2) When an unsubscription fails or succeeds</p>

<p>You do this.</p>

<p><em>module SubscriptionLogic</em></p>

<p><em>   def  after_sub</em></p>

<p><em>      &hellip;.</em></p>

<p><em>   end</em></p>

<p><em>   def  after_unsub</em></p>

<p><em>     &hellip;.</em></p>

<p><em>   end</em></p>

<p><em>   def  after_sub_fail</em></p>

<p><em>     &hellip;.</em></p>

<p><em>   end</em></p>

<p><em>   def  after_unsub_fail</em></p>

<p><em>      &hellip;.</em></p>

<p><em>    end</em></p>

<p><em>end</em></p>

<p><em>class Subscription</em></p>

<p><em>   include SubscriptionLogic</em></p>

<p><em>   &hellip;..</em></p>

<p><em>end</em></p>

<p>You insert the logic as functions of a module, say <strong>SubscriptionLogic</strong>. Ideally you want the methods containing the logic to be instance methods of the class Subscription. You include the module SubscriptionLogic in the class and you avail all the functions in the module as Instance methods. Now you consider the case when an unsubscription fails &ndash; i.e, there is no existing subscription so that an unsub could take place.  No way is it possible that you could have a function &lsquo;logic_after_unsub_fail&#8217;  in the module SubscriptionLogic and use it as an instance method, <em><strong>simply because there is no instance available</strong></em>.  You think and decide to use the function as your class method, but you have &rsquo;<strong>include</strong>d&#8217;  the  module in your class and hence its not possible to use it as your class method. You cannot <strong>extend</strong> the entire module coz , ideally you want the logic to be instance methods.</p>

<p>So you could get this solved up by a simple piece of extra coding.</p>

<p>_module SubscriptionLogic _</p>

<p><em>  def  after_sub</em></p>

<p><em>      &hellip;.</em></p>

<p><em>  end</em></p>

<p><em>  def  after_unsub</em></p>

<p><em>      &hellip;.</em></p>

<p><em>  end</em></p>

<p><em>  def  after_sub_fail</em></p>

<p><em>      &hellip;.</em></p>

<p><em>  end</em></p>

<p><em>  module ClassMethods</em></p>

<p><em>      def after_unsub_fail</em></p>

<p><em>           &hellip;.</em></p>

<p><em>      end</em></p>

<p><em>      def self.included(base)</em></p>

<p>_          base.extend(ClassMethods)    # base pertains to the class within which you include the module. _</p>

<p><em>      end</em></p>

<p><em>   end</em></p>

<p><em>end</em></p>

<p>Now within the class insert this line.</p>

<p>_class Subscription _</p>

<p>_   include SubscriptionLogic _</p>

<p><strong><em>   extend SubscriptionLogic::ClassMethods</em></strong></p>

<p><em>   &hellip;..</em></p>

<p><em>end</em></p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">sunilkumarn</span></span>

      








  


<time datetime="2011-07-04T10:50:51+05:30" pubdate data-updated="true">Jul 4<span>th</span>, 2011</time>
      

<span class="categories">
  
    <a class='category' href='/technical/blog/categories/ruby/'>Ruby</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="/technical//twitter.com/share" class="twitter-share-button" data-url="http://sunilkumarn.github.io/technical/2011/07/04/module-functions-as-class-and-instance-methods" data-via="sunilkumar_g56" data-counturl="http://sunilkumarn.github.io/technical/2011/07/04/module-functions-as-class-and-instance-methods" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/technical/2011/07/03/back-after-a-long-gap" title="Previous Post: Back after a Long Gap...">&laquo; Back after a Long Gap...</a>
      
      
        <a class="basic-alignment right" href="/technical/2011/07/04/ruby-conf-india-2011" title="Next Post: RubyconfIndia 2011">RubyconfIndia 2011 &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/technical/2013/09/01/migrating-from-wordpress-to-jekyll-in-ten-steps">Migrating From Wordpress to Jekyll in Ten Steps</a>
      </li>
    
      <li class="post">
        <a href="/technical/2013/07/07/node-js-event-emitters-and-listeners">Node.js: Event Emitters and Listeners</a>
      </li>
    
      <li class="post">
        <a href="/technical/2013/07/06/rails-admin-with-authlogic">Rails Admin With Authlogic</a>
      </li>
    
      <li class="post">
        <a href="/technical/2013/06/28/prototypal-inheritance-in-javascript">Prototypal Inheritance in Javascript</a>
      </li>
    
      <li class="post">
        <a href="/technical/2013/06/23/node-js-streams-and-pipes">Node.js: Streams and Pipes.</a>
      </li>
    
      <li class="post">
        <a href="/technical/2013/05/21/mercury-the-wysiwyg-html-editor">Mercury: The WYSIWYG Html Editor</a>
      </li>
    
      <li class="post">
        <a href="/technical/2013/05/19/delayed-jobs-in-rails-adding-custom-attributes">Delayed Jobs in Rails: Adding Custom Attributes</a>
      </li>
    
      <li class="post">
        <a href="/technical/2011/12/18/git-a-brief-on-reverts-resets-merges-and-conflicts">Git Reset, Revert, Merge Conflicts and the Faulty Merge</a>
      </li>
    
      <li class="post">
        <a href="/technical/2011/07/12/solution-to-wireless-disabled-by-hardware-switch">Solution to 'Wireless Disabled by Hardware Switch'</a>
      </li>
    
      <li class="post">
        <a href="/technical/2011/07/04/ruby-conf-india-2011">RubyconfIndia 2011</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'sunilkumarn',
            count: ,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/technical/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Sunil Kumar -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'techscribblings';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://sunilkumarn.github.io/technical/2011/07/04/module-functions-as-class-and-instance-methods';
        var disqus_url = 'http://sunilkumarn.github.io/technical/2011/07/04/module-functions-as-class-and-instance-methods';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
